{% extends 'products/base.html' %}
{% load static %}
{% block title %}Личные данные{% endblock %}
{% block content %}
    <div class="nav_details">
        <ul class="title_nav">
            <li><a href="{% url 'products:profile' %}" class="nav profile"><b>Профиль</b></a></li>
            <li><a href="{% url 'products:delivery' %}" class="nav delivery_and_purchases"><b>Доставки и покупки</b></a>
            </li>
            <li><a href="{% url 'products:favourites' %}" class="nav favourite"><b>Избранное</b></a></li>
            <li><a href="{% url 'products:reviews' %}" class="nav reviews"><b>Отзывы</b></a></li>
            <li><a href="{% url 'products:details' %}" class="nav details"><b>Личные данные</b></a></li>
        </ul>
    </div>
    <div class="delivery">
        <a href="{% url 'products:details' %}" class="link_delivery"><b>Личные данные</b></a>
    </div>
    <div class="container-fluid">
        <div class="personal-body">
            <form class="row" action="{% url 'products:details' %}" method="post">
                {% csrf_token %}
                <div class="row">
                    <div class="col-sm-3-name">
                        <label for="{{ form.first_name.id_for_label }}" class="form-label">Имя</label>
                        {{ form.first_name }}
                    </div>
                    <div class="col-sm-3-surname">
                        <label for="{{ form.last_name.id_for_label }}" class="form-label">Фамилия</label>
                        {{ form.last_name }}
                    </div>
                    <div class="col-6 gender">
                        <label class="form-label" style="color: #9797af; font-size: 15px">Пол</label>
                        {{ form.gender }}
                    </div>
                    <div style="margin-top: 20px">
                        <div class="row">
                            <div class="col-sm-3">
                                <label for="{{ form.phone.id_for_label }}" class="form-label">Телефон</label>
                                {{ form.phone }}
                            </div>
                            <div class="col-sm-3">
                                <label for="{{ form.email.id_for_label }}" class="form-label">Эл. почта</label>
                                {{ form.email }}
                            </div>
                        </div>
                    </div>

                </div>
                <div class="row" style="margin-top: 20px">
                    <div class="col-5">
                        <button class="btn btn-outline-dark" type="submit"
                                style="width: 250px; height: 40px;">Сохранить изменения
                        </button>
                    </div>
                </div>
                {% if not form.errors %}
                    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
                        <div id="liveToast" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true">
                            <div class="toast-header">
                                <img src="..." class="rounded me-2" alt="...">
                                <strong class="me-auto">Bootstrap</strong>
                                <small>11 мин назад</small>
                                <button type="button" class="btn-close" data-bs-dismiss="toast"
                                        aria-label="Закрыть"></button>
                            </div>
                            <div class="toast-body">
                                Данные пользователя успешно обновлены
                            </div>
                        </div>
                    </div>
                {% else %}
                    {{ form.errors }}
                {% endif %}

            </form>
        </div>
    </div>
    <div class="mycards" style="margin-top: 30px; margin-left: 10px">
        <p id="mycards-title"><b>Мои карты и счета</b></p>
        <div class="card text-bg-light mb-3" style="width: 300px; height: 180px">
            <div class="card-body">
                <div><span><img src="\static\products\images\footer\visa.png" alt="image" height="23" width="36"></span>
                </div>
                <br>
                <span><b>1234 56** **** 7890</b></span>
                <p id="mycards-header">Основная карта</p>
            </div>
        </div>
    </div>
    <div class="button-add" style="margin-left: 10px">
        <button type="button" class="btn btn-outline-dark" data-bs-toggle="offcanvas" data-bs-target="#NewCard"
                aria-controls="NewCard">+ Новая карта
        </button>
    </div>
    <div class="offcanvas offcanvas-end " tabindex="-1" id="NewCard" aria-labelledby="NewCardLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="NewCardLabel"><b>Новая карта</b></h5>
            <button type="button" class="btn-close btn-close-white text-reset" data-bs-dismiss="offcanvas"
                    aria-label="Закрыть"></button>
        </div>
        <div class="offcanvas-body">
            <div class="row">
                <div class="col">
                    <label for="validationDefault01" class="form-label">Номер карты</label>
                    <input type="text" class="form-control-label" id="validationDefault01"
                           pattern="^(\d{4})(\d{4})(\d{4})(\d{4})$" maxlength="19" required
                           oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\d{4})/g, '$1 ')"
                           placeholder="0000 0000 0000 0000">
                </div>


            </div>
            <div class="row">
                <div class="col-sm-3">
                    <label for="validationDefault01" class="form-label">ММ</label>
                    <input type="text" class="form-control-label" id="validationDefault01" pattern="[0-9]{2}"
                           maxlength="2"
                           required>
                </div>
                <div class="col-sm-3">
                    <label for="validationDefault01" class="form-label">ГГ</label>
                    <input type="text" class="form-control-label" id="validationDefault01" pattern="[0-9]{2}"
                           maxlength="2"
                           required>
                </div>
                <div class="col-sm-3" style="margin-left: 90px">
                    <label for="validationDefault01" class="form-label">CVC</label>
                    <input type="text" class="form-control-label" id="validationDefault01" pattern="[0-9]{3}"
                           maxlength="3"
                           required>
                </div>
            </div>

            <div class="body-payments" style="margin-top: 20px">
                <p>Принимаем карты</p>
                <div class="item-payments">
                    {% for item in logo %}
                        <div class="payments__item" style="margin-top: 10px">
                            <img src="{% static item.img %}" alt="{{ item.alt }}" height="18px">
                        </div>
                    {% endfor %}
                </div>
            </div>
            <div class="row button-submit" style="margin-top: 50px">
                <div class="col">
                    {# Изменить положение кнопки#}
                    <button class="delivery_item_button_submit gradient" type="submit">Привязать</button>
                </div>
            </div>

        </div>
    </div>

{% endblock %}